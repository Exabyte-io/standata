&CONTROL
    calculation = 'cp-wf'
    restart_mode = 'from_scratch'
    tstress = .true.
    tprnfor = .true.
    outdir = '{{ JOB_WORK_DIR }}'
    prefix = 'cp_wf'
    pseudo_dir = '{{ JOB_WORK_DIR }}/pseudo'
    nstep = 100
    iprint = 1
    dt = 0.1
/
&SYSTEM
    ibrav = 0
    nat = 4
    ntyp = 2
    ecutwfc = 50
! TODO: figure out the runtime error when `ecutrho` is set.
! In the meantime, using Norm-conserving pseudopotentials works.
!    ecutrho = 200
    nr1b = 20
    nr2b = 20
    nr3b = 20
/
&ELECTRONS
    electron_dynamics = 'verlet'
    electron_velocities = 'zero'
    emass = 400
/
&IONS
    ion_dynamics = 'verlet'
    ion_velocities = 'zero'
    tempw = 300
/
&CELL
/
&WANNIER
  nit = 60,
  calwf = 3,
  tolw = 1.D-6,
  nsteps = 50,
  adapt = .FALSE.
  wfdt = 2.0D0,
  wf_q = 500.D0,
  wf_friction = 0.3d0,
/
ATOMIC_SPECIES
Fe 55.845 Fe.pbe-spn-rrkjus_psl.1.0.0.UPF
O 15.999 O.pbe-n-rrkjus_psl.1.0.0.UPF

ATOMIC_POSITIONS crystal
Fe     0.000000000    0.000000000    0.000000000 0 1 1
Fe     0.500000000    0.500000000    0.500000000 1 1 1
O      0.250000000    0.250000000    0.250000000 1 1 1
O      0.750000000    0.750000000    0.750000000 1 1 1

CELL_PARAMETERS angstrom
   5.000000000    0.000000000    0.000000000
   0.000000000    5.000000000    0.000000000
   0.000000000    0.000000000    5.000000000
