{"_id": "1bb75a6a-4c8c-5336-a24c-1963e83825bc", "name": "Extract Bands Near Fermi", "application": {"name": "python"}, "properties": [], "model": {"type": "unknown", "subtype": "unknown", "method": {"type": "pseudopotential", "subtype": "us", "data": {}}}, "units": [{"name": "Extract Band Energies", "type": "assignment", "operand": "band_energies", "value": "[band_data[0] for band_data in band_structure.get('yDataSeries', [])] if band_structure.get('yDataSeries', []) else []", "input": [{"name": "band_structure"}], "status": "idle", "statusTrack": [], "flowchartId": "53bd19e7-5d38-5e91-88fb-6b0aa3584587", "tags": [], "head": true, "next": "2f4e2d0e-569a-58e4-bdc5-740637d0885d", "application": {"name": "python", "shortName": "py", "summary": "Python Script", "build": "GNU", "isDefault": true, "version": "3.10.13", "schemaVersion": "2022.8.16"}}, {"name": "Find Valence Bands", "type": "assignment", "operand": "valence_bands", "value": "[(i + 1, e) for i, e in enumerate(band_energies) if e <= fermi_energy]", "input": [{"name": "band_energies"}, {"name": "fermi_energy"}], "status": "idle", "statusTrack": [], "flowchartId": "2f4e2d0e-569a-58e4-bdc5-740637d0885d", "tags": [], "head": false, "next": "15d882e1-3f57-51ac-b333-e35daf26d94b", "application": {"name": "python", "shortName": "py", "summary": "Python Script", "build": "GNU", "isDefault": true, "version": "3.10.13", "schemaVersion": "2022.8.16"}}, {"name": "Find Conduction Bands", "type": "assignment", "operand": "conduction_bands", "value": "[(i + 1, e) for i, e in enumerate(band_energies) if e > fermi_energy]", "input": [{"name": "band_energies"}, {"name": "fermi_energy"}], "status": "idle", "statusTrack": [], "flowchartId": "15d882e1-3f57-51ac-b333-e35daf26d94b", "tags": [], "head": false, "next": "8771dc7f-878e-5f13-a840-a3a416854f1e", "application": {"name": "python", "shortName": "py", "summary": "Python Script", "build": "GNU", "isDefault": true, "version": "3.10.13", "schemaVersion": "2022.8.16"}}, {"name": "Store Band Below EF", "type": "assignment", "operand": "KBAND_VALUE_BELOW_EF", "value": "max(valence_bands, key=lambda x: x[1])[0] if valence_bands else 1", "input": [{"name": "valence_bands"}], "status": "idle", "statusTrack": [], "flowchartId": "8771dc7f-878e-5f13-a840-a3a416854f1e", "tags": [], "head": false, "next": "91e1328f-39dd-5c24-83f9-d49bfe5c620e", "application": {"name": "python", "shortName": "py", "summary": "Python Script", "build": "GNU", "isDefault": true, "version": "3.10.13", "schemaVersion": "2022.8.16"}}, {"name": "Store Band Above EF", "type": "assignment", "operand": "KBAND_VALUE_ABOVE_EF", "value": "min(conduction_bands, key=lambda x: x[1])[0] if conduction_bands else len(band_energies)", "input": [{"name": "conduction_bands"}, {"name": "band_energies"}], "status": "idle", "statusTrack": [], "flowchartId": "91e1328f-39dd-5c24-83f9-d49bfe5c620e", "tags": [], "head": false, "next": "9fa08d2e-0ffd-5c12-8a88-086922fb3f72", "application": {"name": "python", "shortName": "py", "summary": "Python Script", "build": "GNU", "isDefault": true, "version": "3.10.13", "schemaVersion": "2022.8.16"}}, {"name": "Store Valence Energy", "type": "assignment", "operand": "VALENCE_ENERGY", "value": "max(valence_bands, key=lambda x: x[1])[1] if valence_bands else (band_energies[0] if band_energies else 0.0)", "input": [{"name": "valence_bands"}, {"name": "band_energies"}], "status": "idle", "statusTrack": [], "flowchartId": "9fa08d2e-0ffd-5c12-8a88-086922fb3f72", "tags": [], "head": false, "next": "f5fbd236-2453-5ecd-aaf5-49940c45888c", "application": {"name": "python", "shortName": "py", "summary": "Python Script", "build": "GNU", "isDefault": true, "version": "3.10.13", "schemaVersion": "2022.8.16"}}, {"name": "Store Conduction Energy", "type": "assignment", "operand": "CONDUCTION_ENERGY", "value": "min(conduction_bands, key=lambda x: x[1])[1] if conduction_bands else (band_energies[-1] if band_energies else 0.0)", "input": [{"name": "conduction_bands"}, {"name": "band_energies"}], "status": "idle", "statusTrack": [], "flowchartId": "f5fbd236-2453-5ecd-aaf5-49940c45888c", "tags": [], "head": false, "next": "fff25fab-985b-50c6-8b4c-db7f7adb29a8", "application": {"name": "python", "shortName": "py", "summary": "Python Script", "build": "GNU", "isDefault": true, "version": "3.10.13", "schemaVersion": "2022.8.16"}}, {"name": "Store Total Bands", "type": "assignment", "operand": "TOTAL_BANDS", "value": "len(band_energies)", "input": [{"name": "band_energies"}], "status": "idle", "statusTrack": [], "flowchartId": "fff25fab-985b-50c6-8b4c-db7f7adb29a8", "tags": [], "head": false, "next": "57a07d7d-3f68-5f31-97ad-ebe8c5593cd2", "application": {"name": "python", "shortName": "py", "summary": "Python Script", "build": "GNU", "isDefault": true, "version": "3.10.13", "schemaVersion": "2022.8.16"}}, {"name": "Select Band", "type": "assignment", "operand": "KBAND_VALUE", "value": "KBAND_VALUE_BELOW_EF", "input": [{"name": "KBAND_VALUE_BELOW_EF"}], "status": "idle", "statusTrack": [], "flowchartId": "57a07d7d-3f68-5f31-97ad-ebe8c5593cd2", "tags": [], "head": false, "application": {"name": "python", "shortName": "py", "summary": "Python Script", "build": "GNU", "isDefault": true, "version": "3.10.13", "schemaVersion": "2022.8.16"}}]}
