# Note: This subworkflow extracts band indices near Fermi energy
# Expects fermi_energy and band_structure to be passed via unitConfigs
# Outputs: KBAND_VALUE_BELOW_EF, KBAND_VALUE_ABOVE_EF, and KBAND_VALUE (selected)
application:
  name: python
  version: 3.10.13
method:
  name: UnknownMethod
model:
  name: UnknownModel
name: Extract Bands Near Fermi
units:
  - config:
      execName: python
      flavorName: extract_bands_fermi
      name: extract_bands_fermi
      flowchartId: extract-bands-fermi
    type: executionBuilder
  - config:
      name: Store Band Below EF
      operand: KBAND_VALUE_BELOW_EF
      value: "json.loads(STDOUT)['band_below_fermi']"
      input:
        - name: STDOUT
          scope: extract-bands-fermi
    type: assignment
  - config:
      name: Store Band Above EF
      operand: KBAND_VALUE_ABOVE_EF
      value: "json.loads(STDOUT)['band_above_fermi']"
      input:
        - name: STDOUT
          scope: extract-bands-fermi
    type: assignment
  - config:
      name: Select Band
      operand: KBAND_VALUE
      value: "KBAND_VALUE_BELOW_EF"
    type: assignment
