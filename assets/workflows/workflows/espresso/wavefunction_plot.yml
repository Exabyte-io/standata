name: Wavefunction Plot

# To plot a different band, edit the workflow in the UI:
#   1. Open "Extract Bands Near Fermi" unit
#   2. Find the "Select Band" assignment (last unit)
#   3. Change the value:
#      - 'KBAND_VALUE_BELOW_EF' → valence band (VBM, highest occupied)
#      - 'KBAND_VALUE_ABOVE_EF' → conduction band (CBM, lowest unoccupied)

units:
  - name: total_energy_with_bands
    type: subworkflow
  
  - name: extract_bands_fermi
    type: subworkflow
    config:
      unitConfigs:
        - index: 0
          type: executionBuilder
          config:
            attributes:
              input:
                - name: band_structure
                  scope: total_energy_with_bands
                - name: fermi_energy
                  scope: total_energy_with_bands
  
  - name: pp_wfn
    type: subworkflow
    config:
      unitConfigs:
        - index: 0
          type: executionBuilder
          config:
            attributes:
              input:
                - name: KBAND_VALUE
                  scope: extract_bands_fermi
  
  - name: plot_wavefunction
    type: subworkflow

tags:
  - wfn_plot
