# Fit linear ESP for polar interfaces
# Note: this subworkflow is assumed to be used as part of the valence band offset polar workflow
# and is NOT self-sufficient!
# Furthermore, this subworkflow expects the following variable(s) to exist in the global context:
# - average_potential_profile: ESP data from average.x
# - slab1_min, slab1_max, slab2_min, slab2_max: z-coordinate ranges for fitting
application:
  name: python
  version: 3.10.13
method:
  name: UnknownMethod
model:
  name: UnknownModel
name: Fit Polar ESP
units:
  - config:
      name: Fit Linear ESP for Polar Interface
      execName: python
      flavorName: espresso:processing:fit_esp_polar
      flowchartId: python-fit-esp-polar
    type: executionBuilder
    attributes:
      input:
        - name: average_potential_profile
          scope: global
        - name: slab1_min
          scope: global
        - name: slab1_max
          scope: global
        - name: slab2_min
          scope: global
        - name: slab2_max
          scope: global
  - config:
      name: Set Average ESP Value
      operand: AVG_ESP
      value: "json.loads(STDOUT)['minima']"
      input:
        - name: STDOUT
          scope: python-fit-esp-polar
    type: assignment
